<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>components/App.vue - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="FACache.html">FACache</a><ul class='methods'><li data-type='method'><a href="FACache.html#get">get</a></li></ul></li><li><a href="OverviewMesh.html">OverviewMesh</a></li></ul><h3>Modules</h3><ul><li><a href="module-components_Alerts.html">components/Alerts</a><ul class='methods'><li data-type='method'><a href="module-components_Alerts.html#dismiss">dismiss</a></li><li data-type='method'><a href="module-components_Alerts.html#error">error</a></li></ul></li><li><a href="module-components_App.html">components/App</a><ul class='methods'><li data-type='method'><a href="module-components_App.html#addTab">addTab</a></li><li data-type='method'><a href="module-components_App.html#closeTab">closeTab</a></li><li data-type='method'><a href="module-components_App.html#command">command</a></li><li data-type='method'><a href="module-components_App.html#error">error</a></li><li data-type='method'><a href="module-components_App.html#keyDown">keyDown</a></li><li data-type='method'><a href="module-components_App.html#switchTab">switchTab</a></li></ul></li><li><a href="module-components_EventFilter.html">components/EventFilter</a><ul class='methods'><li data-type='method'><a href="module-components_EventFilter.html#refreshProps">refreshProps</a></li><li data-type='method'><a href="module-components_EventFilter.html#sql">sql</a></li></ul></li><li><a href="module-components_EventFilterList.html">components/EventFilterList</a><ul class='methods'><li data-type='method'><a href="module-components_EventFilterList.html#add">add</a></li><li data-type='method'><a href="module-components_EventFilterList.html#remove">remove</a></li><li data-type='method'><a href="module-components_EventFilterList.html#sql">sql</a></li></ul></li><li><a href="module-components_EventList.html">components/EventList</a><ul class='methods'><li data-type='method'><a href="module-components_EventList.html#addEvent">addEvent</a></li><li data-type='method'><a href="module-components_EventList.html#moveDown">moveDown</a></li><li data-type='method'><a href="module-components_EventList.html#moveUp">moveUp</a></li><li data-type='method'><a href="module-components_EventList.html#removeEvent">removeEvent</a></li><li data-type='method'><a href="module-components_EventList.html#renderOrdered">renderOrdered</a></li><li data-type='method'><a href="module-components_EventList.html#toggle">toggle</a></li></ul></li><li><a href="module-components_GameLevelSelect.html">components/GameLevelSelect</a><ul class='methods'><li data-type='method'><a href="module-components_GameLevelSelect.html#refresh">refresh</a></li></ul></li><li><a href="module-components_Heatmap.html">components/Heatmap</a></li><li><a href="module-components_HeatmapGradientSelect.html">components/HeatmapGradientSelect</a></li><li><a href="module-components_Iconpicker.html">components/Iconpicker</a></li><li><a href="module-components_RadioList.html">components/RadioList</a></li><li><a href="module-components_SessionSelect.html">components/SessionSelect</a><ul class='methods'><li data-type='method'><a href="module-components_SessionSelect.html#add">add</a></li><li data-type='method'><a href="module-components_SessionSelect.html#refresh">refresh</a></li><li data-type='method'><a href="module-components_SessionSelect.html#remove">remove</a></li><li data-type='method'><a href="module-components_SessionSelect.html#sessionChange">sessionChange</a></li></ul></li><li><a href="module-components_Timeline.html">components/Timeline</a></li><li><a href="module-components_VisContinuous.html">components/VisContinuous</a><ul class='methods'><li data-type='method'><a href="module-components_VisContinuous.html#clear">clear</a></li><li data-type='method'><a href="module-components_VisContinuous.html#updateAvailable">updateAvailable</a></li><li data-type='method'><a href="module-components_VisContinuous.html#updateFrame">updateFrame</a></li><li data-type='method'><a href="module-components_VisContinuous.html#updateScene">updateScene</a></li><li data-type='method'><a href="module-components_VisContinuous.html#visualise">visualise</a></li></ul></li><li><a href="module-components_VisDiscontinuous.html">components/VisDiscontinuous</a><ul class='methods'><li data-type='method'><a href="module-components_VisDiscontinuous.html#clear">clear</a></li><li data-type='method'><a href="module-components_VisDiscontinuous.html#updateAvailable">updateAvailable</a></li><li data-type='method'><a href="module-components_VisDiscontinuous.html#updateFrame">updateFrame</a></li><li data-type='method'><a href="module-components_VisDiscontinuous.html#updateScene">updateScene</a></li><li data-type='method'><a href="module-components_VisDiscontinuous.html#visualise">visualise</a></li></ul></li><li><a href="module-components_VisTimeline.html">components/VisTimeline</a></li><li><a href="module-components_VisualisationTab.html">components/VisualisationTab</a><ul class='methods'><li data-type='method'><a href="module-components_VisualisationTab.html#loadOverview">loadOverview</a></li><li data-type='method'><a href="module-components_VisualisationTab.html#render">render</a></li><li data-type='method'><a href="module-components_VisualisationTab.html#save">save</a></li><li data-type='method'><a href="module-components_VisualisationTab.html#visualise">visualise</a></li><li data-type='method'><a href="module-components_VisualisationTab.html#visualiseTimeline">visualiseTimeline</a></li><li data-type='method'><a href="module-components_VisualisationTab.html#~msecsToTick">msecsToTick</a></li><li data-type='method'><a href="module-components_VisualisationTab.html#~tickToMsecs">tickToMsecs</a></li></ul></li><li><a href="module-components_WebGLRenderer.html">components/WebGLRenderer</a><ul class='methods'><li data-type='method'><a href="module-components_WebGLRenderer.html#render">render</a></li><li data-type='method'><a href="module-components_WebGLRenderer.html#toDataURL">toDataURL</a></li></ul></li><li><a href="module-importers_csgo_import.html">importers/csgo/import</a><ul class='methods'><li data-type='method'><a href="module-importers_csgo_import.html#~importDemoBuffer">importDemoBuffer</a></li><li data-type='method'><a href="module-importers_csgo_import.html#~importDemoFile">importDemoFile</a></li></ul></li><li><a href="module-models.html">models</a></li><li><a href="module-web_app.html">web/app</a></li></ul><h3>Events</h3><ul><li><a href="global.html#event:error">error</a></li><li><a href="global.html#event:postrender">postrender</a></li><li><a href="global.html#event:render">render</a></li><li><a href="global.html#event:updateFrame">updateFrame</a></li><li><a href="global.html#event:visualise">visualise</a></li></ul><h3>Global</h3><ul><li><a href="global.html#app">app</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">components/App.vue</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>&lt;template>
	&lt;title v-if="selectedTab">Gamevis - {{ selectedTab.title }}&lt;/title>

	&lt;div class="container-fluid">
		&lt;gv-alerts v-ref:alerts>&lt;/gv-alerts>

		&lt;ul class="nav nav-tabs" role="tablist">
			&lt;li v-for="tab in tabs" @click="switchTab($index)" :class="{'active': tab.selected}">
				&lt;a href="#" role="tab">
					&lt;button type="button" class="close" @click="closeTab($index)" aria-label="Close">
						&lt;span aria-hidden="true">Ã—&lt;/span>
					&lt;/button>

					{{tab.title}}
				&lt;/a>
			&lt;/li>

			&lt;li>
				&lt;a href="#" @click="addTab">
					&lt;span class="glyphicon glyphicon-plus">&lt;/span>
				&lt;/a>
			&lt;/li>
		&lt;/ul>

		&lt;div class="tab-content">
			&lt;div class="tab-content">
				&lt;gv-visualisation-tab v-ref:vis v-for="tab in tabs" track-by="id" role="tabpanel" class="tab-pane" :class="{'active': tab.selected}" :title.sync="tab.title">&lt;/gv-visualisation-tab>
			&lt;/div>
		&lt;/div>
	&lt;/div>
&lt;/template>

&lt;script type="text/babel">
	/**
	 * Root application component, contains all components.
	 * @module components/App
	 */

	const ipc = window.require('electron').ipcRenderer;

	export default {
		el: 'body',
		replace: false,
		data: {
			atomicTabs: 0,
			tabs: [],
		},
		computed: {
			selectedTab() {
				return this.tabs.find(q => q.selected);
			}
		},
		methods: {
			/**
			 * Adds a tab to the window.
			 * @instance
			 * @memberof module:components/App
			 */
			addTab() {
				let i = this.tabs.push({
					id: this.atomicTabs++,
					selected: false,
					title: 'Untitled'
				});

				this.switchTab(i - 1);
			},

			/**
			 * Closes an open tab, switching to the left tab if possible.
			 * @instance
			 * @memberof module:components/App
			 * @param {number} index
			 */
			closeTab(index) {
				// find index of the selected tab
				let selectedIndex = this.tabs.findIndex(q => q.selected);

				this.tabs.splice(index, 1);

				let closedSelected = index == selectedIndex;

				// no choice if there's no tabs remaining or only 1 left
				if (this.tabs.length === 0) {
					return this.addTab();
				}
				if (this.tabs.length === 1) {
					return this.switchTab(0);
				}

				// if the tab was selected upon closing, switch to the tab to the left
				if (closedSelected) {
					return this.switchTab(Math.min(index, this.tabs.length - 1));
				}

				if (index > selectedIndex) {
					return this.switchTab(index - 1);
				}
			},
			/**
			 * Switch active tab.
			 * @instance
			 * @memberof module:components/App
			 * @param index
			 */
			switchTab(index) {
				if (index &lt; 0 || index >= this.tabs.length) {
					console.warn('cannot switch to non-existent tab');
					return;
				}

				this.tabs.forEach((q, i) => {
					q.selected = i == index;
				});
			},
			/**
			 * Command received over IPC from the renderer process.
			 * @instance
			 * @memberof module:components/App
			 * @param {string} cmd
			 */
			command(_, cmd) {
				let selectedIndex = this.tabs.findIndex(q => q.selected);

				switch (cmd) {
					case 'new-tab':
						this.addTab();
						break;
					case 'close-tab':
						if (this.tabs.length === 1) {
							window.close();
						} else {
							this.closeTab(selectedIndex);
						}
						break;
					case 'next-tab':
						this.switchTab(selectedIndex + 1);
						break;
					case 'previous-tab':
						this.switchTab(selectedIndex - 1);
						break;
				}
			},
			/**
			 * Handle key press (switching tabs)
			 * @instance
			 * @memberof module:components/App
			 * @param {KeyEvent} e
			 */
			keyDown(e) {
				let cmdOrCtrl = e.metaKey || e.ctrlKey;
				let numKey = e.which - 48;

				if (cmdOrCtrl &amp;&amp; numKey > 0 &amp;&amp; numKey &lt; 9) {
					this.switchTab(numKey - 1);
				} else if (cmdOrCtrl &amp;&amp; numKey == 9) {
					this.switchTab(this.tabs.length - 1);
				}
			}
		},
		events: {
			/**
			 * Re-emits any error events received to {@link components/Alerts}
			 * @instance
			 * @memberof module:components/App
			 * @listens error
			 */
			error(err) {
				this.$refs.alerts.$emit('error', err);
			}
		},
		ready() {
			this.addTab();

			document.onkeydown = this.keyDown.bind(this);
			ipc.on('command', this.command.bind(this));
		}
	}
&lt;/script>
</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a> on Tue Mar 29 2016 10:03:12 GMT+0100 (BST) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
